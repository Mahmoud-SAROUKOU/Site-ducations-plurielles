<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administration - √âducations Plurielles</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Recovery Script int√©gr√© -->
    <script src="recovery-script.js" defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        /* Style WordPress-like */
        .wp-sidebar {
            width: 160px;
            background: #23282d;
            color: #fff;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }

        .wp-sidebar a {
            display: block;
            padding: 12px 15px;
            color: #eee;
            text-decoration: none;
            transition: all 0.2s;
            border-left: 4px solid transparent;
        }

        .wp-sidebar a:hover,
        .wp-sidebar a.active {
            background: #0073aa;
            border-left-color: #00a0d2;
        }

        .wp-topbar {
            background: #23282d;
            color: #fff;
            height: 60px;
            position: fixed;
            top: 0;
            left: 160px;
            right: 0;
            display: flex;
            align-items: center;
            padding: 0 20px;
            z-index: 90;
        }

        .wp-content {
            margin-left: 160px;
            margin-top: 60px;
            padding: 30px;
            background: #f1f1f1;
            min-height: calc(100vh - 60px);
        }

        .wp-card {
            background: #fff;
            border: 1px solid #ccd0d4;
            box-shadow: 0 1px 1px rgba(0, 0, 0, .04);
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .wp-card-header {
            background: #f5f5f5;
            padding: 15px 20px;
            border-bottom: 1px solid #ccd0d4;
            font-weight: 600;
        }

        .wp-card-body {
            padding: 20px;
        }

        .wp-button {
            background: #0073aa;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .wp-button:hover {
            background: #005177;
        }

        .wp-button-danger {
            background: #d63638;
        }

        .wp-button-danger:hover {
            background: #b32d2e;
        }

        .wp-button-secondary {
            background: #fff;
            color: #2271b1;
            border: 1px solid #2271b1;
        }

        .wp-button-secondary:hover {
            background: #f0f0f1;
        }

        /* ===== STYLES PAGE D'ACCUEIL ===== */
        .welcome-page {
            display: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow-y: auto;
            z-index: 9999;
        }

        .welcome-page.active {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .welcome-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 1000px;
            width: 100%;
            padding: 50px;
            animation: slideIn 0.4s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .welcome-header {
            margin-bottom: 40px;
            text-align: center;
        }

        .welcome-header h1 {
            font-size: 36px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .welcome-header p {
            color: #666;
            font-size: 16px;
        }

        .welcome-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .welcome-card {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .welcome-card:hover {
            border-color: #667eea;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
            transform: translateY(-8px);
            background: #f0f3ff;
        }

        .welcome-card i {
            font-size: 40px;
            color: #667eea;
            margin-bottom: 15px;
            display: block;
        }

        .welcome-card h3 {
            color: #333;
            margin-bottom: 8px;
            font-size: 15px;
            font-weight: 600;
        }

        .welcome-card p {
            color: #666;
            font-size: 13px;
        }

        .welcome-status {
            background: #f0f0f0;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .welcome-status h4 {
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .welcome-status-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            font-size: 14px;
        }

        .status-indicator {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .status-ok {
            background: #28a745;
        }

        .status-warning {
            background: #ffc107;
            color: #333;
        }

        .status-error {
            background: #dc3545;
        }

        .welcome-actions {
            margin-top: 35px;
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .welcome-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .welcome-btn i {
            margin-right: 8px;
        }

        .welcome-btn-primary {
            background: #667eea;
            color: white;
        }

        .welcome-btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .welcome-btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .welcome-btn-secondary:hover {
            background: #d0d0d0;
            transform: translateY(-2px);
        }

        .welcome-btn-danger {
            background: #dc3545;
            color: white;
        }

        .welcome-btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
        }

        .welcome-footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            color: #999;
            font-size: 13px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .welcome-container {
                padding: 30px 20px;
            }

            .welcome-header h1 {
                font-size: 24px;
            }

            .welcome-grid {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
                gap: 15px;
            }
        }

        .wp-table {
            width: 100%;
            border-collapse: collapse;
        }

        .wp-table th {
            background: #f6f7f7;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            border-bottom: 1px solid #ccd0d4;
        }

        .wp-table td {
            padding: 12px;
            border-bottom: 1px solid #dcdcde;
        }

        .wp-table tr:hover {
            background: #f6f7f7;
        }

        .wp-input,
        .wp-textarea,
        .wp-select {
            width: 100%;
            padding: 10px;
            border: 1px solid #8c8f94;
            border-radius: 4px;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .wp-input:focus,
        .wp-textarea:focus,
        .wp-select:focus {
            border-color: #2271b1;
            outline: none;
            box-shadow: 0 0 0 1px #2271b1;
        }

        .wp-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1d2327;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-success {
            background: #00a32a;
            color: #fff;
        }

        .badge-warning {
            background: #dba617;
            color: #fff;
        }

        .badge-danger {
            background: #d63638;
            color: #fff;
        }

        .badge-info {
            background: #2271b1;
            color: #fff;
        }

        .hidden {
            display: none !important;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 70px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification-success {
            background: #00a32a;
            color: #fff;
        }

        .notification-error {
            background: #d63638;
            color: #fff;
        }

        /* Spinner */
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #0073aa;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .modal {
            background: #fff;
            border-radius: 4px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            background: #f5f5f5;
            padding: 15px 20px;
            border-bottom: 1px solid #ccd0d4;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #ccd0d4;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Image preview */
        .image-preview {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #ccd0d4;
        }

        /* Animation ticker */
        @keyframes scroll {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        .news-ticker {
            display: flex;
            animation: scroll 30s linear infinite;
        }

        /* Sync indicator pulsing */
        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .syncing {
            animation: pulse 1s infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .wp-sidebar {
                width: 0;
                transform: translateX(-100%);
            }

            .wp-topbar {
                left: 0;
            }

            .wp-content {
                margin-left: 0;
            }

            .wp-sidebar.mobile-open {
                width: 200px;
                transform: translateX(0);
            }
        }
    </style>
</head>

<body>
    <!-- PAGE D'ACCUEIL INTERACTIVE -->
    <div id="welcomePage" class="welcome-page active">
        <div class="welcome-container">
            <div class="welcome-header">
                <h1>üéì Tableau de bord administrateur</h1>
                <p>Bienvenue dans l'interface d'administration √âducations Plurielles</p>
            </div>

            <!-- Statut du syst√®me -->
            <div class="welcome-status">
                <h4>üìä √âtat du syst√®me</h4>
                <div class="welcome-status-item">
                    <div class="status-indicator status-ok">‚úì</div>
                    <div>Application: <strong>Op√©rationnelle</strong></div>
                </div>
                <div class="welcome-status-item">
                    <div class="status-indicator status-ok" id="adminStatusIcon">‚úì</div>
                    <div id="adminStatusText">Administrateurs: <strong>0</strong></div>
                </div>
                <div class="welcome-status-item">
                    <div class="status-indicator status-warning" id="syncStatusIcon">‚ö†</div>
                    <div id="syncStatusText">Synchronisation: <strong>D√©sactiv√©e</strong></div>
                </div>
                <div class="welcome-status-item">
                    <div class="status-indicator status-ok">‚úì</div>
                    <div id="storageStatusText">Stockage: <strong id="storageSize">0 KB</strong></div>
                </div>
            </div>

            <!-- Grille d'acc√®s rapide -->
            <div class="welcome-grid">
                <div class="welcome-card" onclick="showAdminPanel(); goToSection('dashboard')">
                    <i class="fas fa-chart-line"></i>
                    <h3>üìä Tableau de bord</h3>
                    <p>Vue d'ensemble du syst√®me</p>
                </div>

                <div class="welcome-card" onclick="showAdminPanel(); goToSection('articles')">
                    <i class="fas fa-newspaper"></i>
                    <h3>üì∞ Articles</h3>
                    <p>G√©rer les articles du blog</p>
                </div>

                <div class="welcome-card" onclick="showAdminPanel(); goToSection('publicites')">
                    <i class="fas fa-bullhorn"></i>
                    <h3>üì£ Publicit√©s</h3>
                    <p>G√©rer les annonces</p>
                </div>

                <div class="welcome-card" onclick="showAdminPanel(); goToSection('administrateurs')">
                    <i class="fas fa-users-cog"></i>
                    <h3>üë• Administrateurs</h3>
                    <p>G√©rer les comptes admin</p>
                </div>

                <div class="welcome-card" onclick="showAdminPanel(); goToSection('parametres')">
                    <i class="fas fa-cog"></i>
                    <h3>‚öôÔ∏è Param√®tres</h3>
                    <p>Configuration du syst√®me</p>
                </div>

                <div class="welcome-card" onclick="openDocumentation()">
                    <i class="fas fa-book"></i>
                    <h3>üìö Documentation</h3>
                    <p>Consulter l'aide compl√®te</p>
                </div>
            </div>

            <!-- Actions principales -->
            <div class="welcome-actions">
                <button class="welcome-btn welcome-btn-primary" onclick="showAdminPanel()">
                    <i class="fas fa-arrow-right"></i> Entrer au tableau de bord
                </button>
                <button class="welcome-btn welcome-btn-secondary" onclick="checkSystemHealth()">
                    <i class="fas fa-heartbeat"></i> Diagnostic
                </button>
                <button class="welcome-btn welcome-btn-danger" onclick="launchRecoveryScript()">
                    <i class="fas fa-wrench"></i> R√©cup√©ration urgente
                </button>
            </div>

            <!-- Footer -->
            <div class="welcome-footer">
                <p><i class="fas fa-clock"></i> <span id="lastUpdate">--</span></p>
                <p><i class="fas fa-check-circle" style="color: #28a745;"></i> Tous les syst√®mes op√©rationnels</p>
            </div>
        </div>
    </div>

    <!-- INTERFACE ADMIN PRINCIPALE -->
    <div id="adminPanel" style="display: none;">
        <!-- SIDEBAR -->
        <div class="wp-sidebar" id="sidebar">
            <div style="padding: 20px; border-bottom: 1px solid #32373c;">
                <h2 style="font-size: 18px; font-weight: 600;">
                    <i class="fas fa-graduation-cap"></i> Admin
                </h2>
            </div>
            <nav>
                <a href="#dashboard" class="nav-link active" data-view="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Tableau de bord
                </a>
                <a href="#articles" class="nav-link" data-view="articles">
                    <i class="fas fa-newspaper"></i> Articles
                </a>
                <a href="#ads" class="nav-link" data-view="ads">
                    <i class="fas fa-bullhorn"></i> Annonces
                </a>
                <a href="#admins" class="nav-link" data-view="admins">
                    <i class="fas fa-users-cog"></i> Administrateurs
                </a>
                <a href="#settings" class="nav-link" data-view="settings">
                    <i class="fas fa-cog"></i> Param√®tres
                </a>
                <a href="#" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> D√©connexion
                </a>
            </nav>
        </div>

        <!-- TOP BAR -->
        <div class="wp-topbar">
            <button id="menuToggle"
                style="background: none; border: none; color: #fff; font-size: 20px; cursor: pointer; margin-right: 15px;">
                <i class="fas fa-bars"></i>
            </button>
            <h1 style="font-size: 20px; font-weight: 400; flex: 1;">√âducations Plurielles</h1>
            <div style="display: flex; align-items: center; gap: 15px;">
                <span id="lastSyncTime" style="font-size: 12px; color: #bbb; margin-right: 10px;"></span>
                <span id="currentAdmin" style="font-size: 14px;"></span>
                <span id="syncStatus" class="badge badge-warning">Hors ligne</span>
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="wp-content">
            <!-- DASHBOARD VIEW -->
            <div id="dashboard-view" class="view">
                <h1 style="font-size: 28px; margin-bottom: 25px;">Tableau de bord</h1>

                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div class="wp-card"
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; border: none;">
                        <div class="wp-card-body">
                            <div style="font-size: 36px; font-weight: 700;" id="statsArticles">0</div>
                            <div style="margin-top: 5px; opacity: 0.9;">Articles publi√©s</div>
                        </div>
                    </div>

                    <div class="wp-card"
                        style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: #fff; border: none;">
                        <div class="wp-card-body">
                            <div style="font-size: 36px; font-weight: 700;" id="statsAds">0</div>
                            <div style="margin-top: 5px; opacity: 0.9;">Annonces actives</div>
                        </div>
                    </div>

                    <div class="wp-card"
                        style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #fff; border: none;">
                        <div class="wp-card-body">
                            <div style="font-size: 36px; font-weight: 700;" id="statsAdmins">0</div>
                            <div style="margin-top: 5px; opacity: 0.9;">Administrateurs</div>
                        </div>
                    </div>
                </div>

                <div class="wp-card">
                    <div class="wp-card-header">
                        <i class="fas fa-clock"></i> Activit√© r√©cente
                    </div>
                    <div class="wp-card-body">
                        <div id="recentActivity">
                            <p style="color: #666;">Aucune activit√© r√©cente.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ARTICLES VIEW -->
            <div id="articles-view" class="view hidden">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                    <h1 style="font-size: 28px;">Articles</h1>
                    <button class="wp-button" onclick="showArticleModal()">
                        <i class="fas fa-plus"></i> Nouvel article
                    </button>
                </div>

                <div class="wp-card">
                    <div class="wp-card-header">
                        Liste des articles
                    </div>
                    <div class="wp-card-body">
                        <table class="wp-table" id="articlesTable">
                            <thead>
                                <tr>
                                    <th>Titre</th>
                                    <th>Cat√©gorie</th>
                                    <th>Auteur</th>
                                    <th>Date</th>
                                    <th>Statut</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="articlesTableBody">
                                <tr>
                                    <td colspan="6" style="text-align: center; color: #666;">Chargement...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ADS VIEW -->
            <div id="ads-view" class="view hidden">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                    <h1 style="font-size: 28px;">Annonces d√©filantes</h1>
                    <button class="wp-button" onclick="showAdModal()">
                        <i class="fas fa-plus"></i> Nouvelle annonce
                    </button>
                </div>

                <div class="wp-card" style="margin-bottom: 20px;">
                    <div class="wp-card-header">
                        <i class="fas fa-eye"></i> Pr√©visualisation de la barre d√©filante
                    </div>
                    <div class="wp-card-body" style="padding: 0; overflow: hidden;">
                        <div style="background: #d63638; color: #fff; padding: 12px 0; overflow: hidden;">
                            <div id="adPreviewTicker" class="news-ticker" style="display: flex; white-space: nowrap;">
                                <span style="padding: 0 30px;">Aucune annonce active</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="wp-card">
                    <div class="wp-card-header">
                        Liste des annonces
                    </div>
                    <div class="wp-card-body">
                        <table class="wp-table" id="adsTable">
                            <thead>
                                <tr>
                                    <th>Ic√¥ne</th>
                                    <th>Message</th>
                                    <th>Position</th>
                                    <th>Statut</th>
                                    <th>Ordre</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="adsTableBody">
                                <tr>
                                    <td colspan="6" style="text-align: center; color: #666;">Chargement...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ADMINS VIEW -->
            <div id="admins-view" class="view hidden">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                    <h1 style="font-size: 28px;">Administrateurs</h1>
                    <button class="wp-button" onclick="showAdminModal()">
                        <i class="fas fa-user-plus"></i> Nouvel administrateur
                    </button>
                </div>

                <div class="wp-card" style="margin-bottom: 20px; background: #fffbea; border-color: #dba617;">
                    <div class="wp-card-body">
                        <i class="fas fa-exclamation-triangle" style="color: #dba617;"></i>
                        <strong>Note :</strong> Seuls les administrateurs principaux peuvent ajouter ou supprimer
                        d'autres
                        administrateurs.
                    </div>
                </div>

                <div class="wp-card">
                    <div class="wp-card-header">
                        Liste des administrateurs
                    </div>
                    <div class="wp-card-body">
                        <table class="wp-table" id="adminsTable">
                            <thead>
                                <tr>
                                    <th>Nom</th>
                                    <th>Email</th>
                                    <th>R√¥le</th>
                                    <th>Date de cr√©ation</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="adminsTableBody">
                                <tr>
                                    <td colspan="5" style="text-align: center; color: #666;">Chargement...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- SETTINGS VIEW -->
            <div id="settings-view" class="view hidden">
                <h1 style="font-size: 28px; margin-bottom: 25px;">Param√®tres</h1>

                <div class="wp-card">
                    <div class="wp-card-header">
                        <i class="fas fa-sync"></i> Synchronisation Hostinger
                    </div>
                    <div class="wp-card-body">
                        <label class="wp-label">URL du point de synchronisation</label>
                        <input type="url" id="syncEndpoint" class="wp-input"
                            placeholder="https://votre-domaine.com/admin/api/sync.php">

                        <label class="wp-label">URL d'upload d'images</label>
                        <input type="url" id="uploadUrl" class="wp-input"
                            placeholder="https://votre-domaine.com/admin/api/upload.php">

                        <label class="wp-label">URL de rafra√Æchissement public</label>
                        <input type="url" id="refreshUrl" class="wp-input"
                            placeholder="https://votre-domaine.com/?refresh=1">

                        <label class="wp-label">Cl√© de synchronisation</label>
                        <input type="password" id="apiKey" class="wp-input" placeholder="Votre cl√© API s√©curis√©e">

                        <label style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                            <input type="checkbox" id="syncEnabled" style="width: auto;">
                            <span>Synchroniser en ligne (Hostinger)</span>
                        </label>

                        <button class="wp-button" onclick="saveSettings()">
                            <i class="fas fa-save"></i> Enregistrer la configuration
                        </button>
                    </div>
                </div>

                <div class="wp-card">
                    <div class="wp-card-header">
                        <i class="fas fa-database"></i> Gestion des donn√©es
                    </div>
                    <div class="wp-card-body">
                        <button class="wp-button wp-button-secondary" onclick="exportData()">
                            <i class="fas fa-download"></i> Exporter les donn√©es
                        </button>
                        <button class="wp-button wp-button-danger" onclick="clearAllData()" style="margin-left: 10px;">
                            <i class="fas fa-trash"></i> Effacer toutes les donn√©es
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL ARTICLE -->
        <div id="articleModal" class="modal-overlay hidden">
            <div class="modal">
                <div class="modal-header">
                    <h3 id="articleModalTitle">Nouvel article</h3>
                    <button onclick="closeModal('articleModal')"
                        style="background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="articleId">
                    <input type="hidden" id="articleRemoteId">

                    <label class="wp-label">Titre *</label>
                    <input type="text" id="articleTitle" class="wp-input" placeholder="Titre de l'article" required>

                    <label class="wp-label">Slug (URL)</label>
                    <input type="text" id="articleSlug" class="wp-input" placeholder="mon-article-exemple">

                    <label class="wp-label">Extrait</label>
                    <textarea id="articleExcerpt" class="wp-textarea" rows="3"
                        placeholder="R√©sum√© court de l'article"></textarea>

                    <label class="wp-label">Contenu *</label>
                    <textarea id="articleContent" class="wp-textarea" rows="10"
                        placeholder="Contenu complet de l'article" required></textarea>

                    <label class="wp-label">Cat√©gorie</label>
                    <select id="articleCategory" class="wp-select">
                        <option value="parentalite">Parentalit√©</option>
                        <option value="education">√âducation</option>
                        <option value="droits">Droits de l'enfant</option>
                        <option value="protection">Protection</option>
                        <option value="sante">Sant√©</option>
                        <option value="developpement">D√©veloppement</option>
                        <option value="temoignages">T√©moignages</option>
                    </select>

                    <label class="wp-label">Image</label>
                    <input type="file" id="articleImage" accept="image/*" class="wp-input"
                        onchange="previewImage(this, 'articleImagePreview')">
                    <img id="articleImagePreview" class="image-preview hidden" style="margin-top: 10px;">
                    <input type="hidden" id="articleImageUrl">

                    <label class="wp-label">Auteur</label>
                    <input type="text" id="articleAuthor" class="wp-input" placeholder="Nom de l'auteur">

                    <label class="wp-label">Tags (s√©par√©s par des virgules)</label>
                    <input type="text" id="articleTags" class="wp-input" placeholder="tag1, tag2, tag3">

                    <label class="wp-label">Temps de lecture</label>
                    <input type="text" id="articleReadTime" class="wp-input" placeholder="5 min">

                    <label class="wp-label">Statut</label>
                    <select id="articleStatus" class="wp-select">
                        <option value="published">Publi√©</option>
                        <option value="draft">Brouillon</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button class="wp-button wp-button-secondary" onclick="closeModal('articleModal')">Annuler</button>
                    <button class="wp-button" onclick="saveArticle()">
                        <i class="fas fa-save"></i> Enregistrer
                    </button>
                </div>
            </div>
        </div>

        <!-- MODAL AD -->
        <div id="adModal" class="modal-overlay hidden">
            <div class="modal">
                <div class="modal-header">
                    <h3 id="adModalTitle">Nouvelle annonce</h3>
                    <button onclick="closeModal('adModal')"
                        style="background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="adId">
                    <input type="hidden" id="adRemoteId">

                    <label class="wp-label">Nom (identifiant) *</label>
                    <input type="text" id="adName" class="wp-input" placeholder="nom-annonce" required>

                    <label class="wp-label">Message *</label>
                    <textarea id="adMessage" class="wp-textarea" rows="3" placeholder="Message de l'annonce"
                        required></textarea>

                    <label class="wp-label">Ic√¥ne (emoji ou code)</label>
                    <input type="text" id="adIcon" class="wp-input" placeholder="üì¢" value="üì¢">

                    <label class="wp-label">Position</label>
                    <select id="adPosition" class="wp-select">
                        <option value="header">En-t√™te</option>
                        <option value="sidebar">Barre lat√©rale</option>
                        <option value="footer">Pied de page</option>
                    </select>

                    <label class="wp-label">Lien cible (optionnel)</label>
                    <input type="url" id="adTargetUrl" class="wp-input" placeholder="https://...">

                    <label class="wp-label">Statut</label>
                    <select id="adStatus" class="wp-select">
                        <option value="active">Actif</option>
                        <option value="inactive">Inactif</option>
                    </select>

                    <label class="wp-label">Ordre d'affichage</label>
                    <input type="number" id="adDisplayOrder" class="wp-input" value="0" min="0">
                </div>
                <div class="modal-footer">
                    <button class="wp-button wp-button-secondary" onclick="closeModal('adModal')">Annuler</button>
                    <button class="wp-button" onclick="saveAd()">
                        <i class="fas fa-save"></i> Enregistrer
                    </button>
                </div>
            </div>
        </div>

        <!-- MODAL ADMIN -->
        <div id="adminModal" class="modal-overlay hidden">
            <div class="modal">
                <div class="modal-header">
                    <h3 id="adminModalTitle">Nouvel administrateur</h3>
                    <button onclick="closeModal('adminModal')"
                        style="background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="adminId">
                    <input type="hidden" id="adminPreviousEmail">

                    <label class="wp-label">Nom *</label>
                    <input type="text" id="adminName" class="wp-input" placeholder="Nom complet" required>

                    <label class="wp-label">Email *</label>
                    <input type="email" id="adminEmail" class="wp-input" placeholder="email@exemple.com" required>

                    <label class="wp-label">Mot de passe *</label>
                    <input type="password" id="adminPassword" class="wp-input" placeholder="Mot de passe s√©curis√©"
                        required>
                    <small style="color: #666;">Laissez vide pour ne pas changer le mot de passe lors de la
                        modification</small>

                    <label class="wp-label">R√¥le</label>
                    <select id="adminRole" class="wp-select">
                        <option value="admin">Administrateur</option>
                        <option value="super_admin">Super Administrateur</option>
                    </select>

                    <label style="display: flex; align-items: center; gap: 10px; margin-top: 15px;">
                        <input type="checkbox" id="adminSendEmail" style="width: auto;" checked>
                        <span>Envoyer un email de notification √† cet administrateur</span>
                    </label>
                </div>
                <div class="modal-footer">
                    <button class="wp-button wp-button-secondary" onclick="closeModal('adminModal')">Annuler</button>
                    <button class="wp-button" onclick="saveAdmin()">
                        <i class="fas fa-save"></i> Enregistrer
                    </button>
                </div>
            </div>
        </div>

        <script>
            // ==========================================
            // GESTION DES DONN√âES
            // ==========================================

            let currentView = 'dashboard';
            let articles = JSON.parse(localStorage.getItem('ep_articles') || '[]');
            let ads = JSON.parse(localStorage.getItem('ep_ads') || '[]');
            let admins = JSON.parse(localStorage.getItem('ep_admins') || '[]');
            let syncConfig = JSON.parse(localStorage.getItem('syncConfig') || '{"enabled": false, "endpoint": "", "uploadUrl": "", "refreshUrl": "", "apiKey": ""}');
            let currentAdmin = JSON.parse(localStorage.getItem('ep_current_admin') || '{"name": "Admin", "email": "admin@local.com", "role": "super_admin"}');

            // Auto-sync
            let autoSyncInterval = null;
            let lastDataHash = '';
            let isSyncing = false;

            // ‚úÖ CORRECTION: Log au d√©marrage
            console.log('üöÄ Application d√©marr√©e');
            console.log('üìä √âtat initial:', {
                articles: articles.length,
                ads: ads.length,
                admins: admins.length,
                syncEnabled: syncConfig.enabled
            });

            // Initialiser admin par d√©faut si n√©cessaire
            if (admins.length === 0) {
                admins = [{
                    id: Date.now(),
                    name: currentAdmin.name,
                    email: currentAdmin.email,
                    role: currentAdmin.role,
                    created_at: new Date().toISOString(),
                    needs_sync: false
                }];
                localStorage.setItem('ep_admins', JSON.stringify(admins));
                console.log('‚úÖ Admin par d√©faut cr√©√©');
            }

            // ==========================================
            // INITIALISATION
            // ==========================================

            document.addEventListener('DOMContentLoaded', function () {
                initializeApp();
                loadSettings();
                updateStats();
                renderArticles();
                renderAds();
                renderAdmins();
                updateAdPreview();

                // D√©marrer auto-sync
                startAutoSync();

                // Navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', function (e) {
                        e.preventDefault();
                        const view = this.getAttribute('data-view');
                        if (view) navigateTo(view);
                    });
                });

                // Menu mobile
                document.getElementById('menuToggle').addEventListener('click', function () {
                    document.getElementById('sidebar').classList.toggle('mobile-open');
                });

                // Logout
                document.getElementById('logoutBtn').addEventListener('click', function (e) {
                    e.preventDefault();
                    if (confirm('Voulez-vous vraiment vous d√©connecter ?')) {
                        stopAutoSync();
                        localStorage.removeItem('ep_current_admin');
                        window.location.href = 'login.html';
                    }
                });
            });

            function initializeApp() {
                updateSyncStatus();

                // ‚úÖ CORRECTION: Recharger les donn√©es du localStorage en cas de rafra√Æchissement
                articles = JSON.parse(localStorage.getItem('ep_articles') || '[]');
                ads = JSON.parse(localStorage.getItem('ep_ads') || '[]');
                admins = JSON.parse(localStorage.getItem('ep_admins') || '[]');
                syncConfig = JSON.parse(localStorage.getItem('syncConfig') || '{"enabled": false, "endpoint": "", "uploadUrl": "", "refreshUrl": "", "apiKey": ""}');

                console.log('‚úÖ Donn√©es recharg√©es:', {
                    articles: articles.length,
                    ads: ads.length,
                    admins: admins.length,
                    syncEnabled: syncConfig.enabled
                });
            }

            function updateSyncStatus() {
                const statusEl = document.getElementById('syncStatus');
                if (syncConfig.enabled) {
                    statusEl.textContent = 'En ligne';
                    statusEl.className = 'badge badge-success';
                } else {
                    statusEl.textContent = 'Hors ligne';
                    statusEl.className = 'badge badge-warning';
                }
            }

            // ==========================================
            // AUTO-SYNC TOUTES LES 1 SECONDE
            // ==========================================

            function startAutoSync() {
                if (autoSyncInterval) clearInterval(autoSyncInterval);

                if (syncConfig.enabled && syncConfig.endpoint) {
                    autoSyncInterval = setInterval(async () => {
                        await performAutoSync();
                    }, 1000); // 1 seconde

                    console.log('‚úÖ Auto-sync d√©marr√© (1s)');
                }
            }

            function stopAutoSync() {
                if (autoSyncInterval) {
                    clearInterval(autoSyncInterval);
                    autoSyncInterval = null;
                    console.log('‚ùå Auto-sync arr√™t√©');
                }
            }

            async function performAutoSync() {
                if (isSyncing || !syncConfig.enabled) return;

                // Calculer hash des donn√©es actuelles
                const currentHash = getDataHash();

                // Si les donn√©es n'ont pas chang√©, ne rien faire
                if (currentHash === lastDataHash) return;

                isSyncing = true;
                const statusEl = document.getElementById('syncStatus');
                statusEl.classList.add('syncing');

                try {
                    // Sync articles
                    for (const article of articles) {
                        if (article.needs_sync) {
                            await syncToServer('article', article, article.remote_id ? 'update' : 'create');
                            article.needs_sync = false;
                        }
                    }

                    // Sync ads
                    for (const ad of ads) {
                        if (ad.needs_sync) {
                            await syncToServer('ad', ad, ad.remote_id ? 'update' : 'create');
                            ad.needs_sync = false;
                        }
                    }

                    // Sync admins
                    for (const admin of admins) {
                        if (admin.needs_sync) {
                            const syncData = {
                                nom: admin.name,
                                name: admin.name,
                                email: admin.email,
                                role: admin.role
                            };
                            await syncToServer('admin', syncData, admin.remote_id ? 'update' : 'create');
                            admin.needs_sync = false;
                        }
                    }

                    // Sauvegarder et mettre √† jour le hash
                    localStorage.setItem('ep_articles', JSON.stringify(articles));
                    localStorage.setItem('ep_ads', JSON.stringify(ads));
                    localStorage.setItem('ep_admins', JSON.stringify(admins));
                    lastDataHash = currentHash;

                    // Mettre √† jour l'heure de derni√®re sync
                    const now = new Date();
                    const timeStr = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                    document.getElementById('lastSyncTime').textContent = `Derni√®re sync: ${timeStr}`;

                } catch (error) {
                    console.error('Auto-sync error:', error);
                } finally {
                    isSyncing = false;
                    statusEl.classList.remove('syncing');
                }
            }

            function getDataHash() {
                const data = JSON.stringify({ articles, ads, admins });
                let hash = 0;
                for (let i = 0; i < data.length; i++) {
                    const char = data.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash;
                }
                return hash.toString();
            }

            // ==========================================
            // PR√âVISUALISATION BARRE D√âFILANTE
            // ==========================================

            function updateAdPreview() {
                const ticker = document.getElementById('adPreviewTicker');
                if (!ticker) return;

                const activeAds = ads.filter(ad => ad.status === 'active').sort((a, b) => (a.display_order || 0) - (b.display_order || 0));

                if (activeAds.length === 0) {
                    ticker.innerHTML = '<span style="padding: 0 30px;">Aucune annonce active</span>';
                    return;
                }

                // Doubler les annonces pour l'effet de boucle infinie
                const adsHTML = activeAds.map(ad =>
                    `<span style="padding: 0 30px;">${ad.icon} ${ad.message}</span>`
                ).join('');

                ticker.innerHTML = adsHTML + adsHTML;
            }

            // ==========================================
            // AUTO-SYNC TOUTES LES 1 SECONDE
            // ==========================================

            function startAutoSync() {
                if (autoSyncInterval) clearInterval(autoSyncInterval);

                if (syncConfig.enabled && syncConfig.endpoint) {
                    autoSyncInterval = setInterval(async () => {
                        await performAutoSync();
                    }, 1000); // 1 seconde

                    console.log('‚úÖ Auto-sync d√©marr√© (1s)');
                }
            }

            function stopAutoSync() {
                if (autoSyncInterval) {
                    clearInterval(autoSyncInterval);
                    autoSyncInterval = null;
                    console.log('‚ùå Auto-sync arr√™t√©');
                }
            }

            async function performAutoSync() {
                if (isSyncing || !syncConfig.enabled) return;

                // Calculer hash des donn√©es actuelles
                const currentHash = getDataHash();

                // Si les donn√©es n'ont pas chang√©, ne rien faire
                if (currentHash === lastDataHash) return;

                isSyncing = true;
                const statusEl = document.getElementById('syncStatus');
                statusEl.classList.add('syncing');

                try {
                    // Sync articles
                    for (const article of articles) {
                        if (article.needs_sync) {
                            await syncToServer('article', article, article.remote_id ? 'update' : 'create');
                            article.needs_sync = false;
                        }
                    }

                    // Sync ads
                    for (const ad of ads) {
                        if (ad.needs_sync) {
                            await syncToServer('ad', ad, ad.remote_id ? 'update' : 'create');
                            ad.needs_sync = false;
                        }
                    }

                    // Sync admins
                    for (const admin of admins) {
                        if (admin.needs_sync) {
                            const syncData = {
                                nom: admin.name,
                                name: admin.name,
                                email: admin.email,
                                role: admin.role
                            };
                            await syncToServer('admin', syncData, admin.remote_id ? 'update' : 'create');
                            admin.needs_sync = false;
                        }
                    }

                    // Sauvegarder et mettre √† jour le hash
                    localStorage.setItem('ep_articles', JSON.stringify(articles));
                    localStorage.setItem('ep_ads', JSON.stringify(ads));
                    localStorage.setItem('ep_admins', JSON.stringify(admins));
                    lastDataHash = currentHash;

                    // Mettre √† jour l'heure de derni√®re sync
                    const now = new Date();
                    const timeStr = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                    document.getElementById('lastSyncTime').textContent = `Derni√®re sync: ${timeStr}`;

                } catch (error) {
                    console.error('Auto-sync error:', error);
                } finally {
                    isSyncing = false;
                    statusEl.classList.remove('syncing');
                }
            }

            function getDataHash() {
                const data = JSON.stringify({ articles, ads, admins });
                let hash = 0;
                for (let i = 0; i < data.length; i++) {
                    const char = data.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash;
                }
                return hash.toString();
            }

            // ==========================================
            // PR√âVISUALISATION BARRE D√âFILANTE
            // ==========================================

            function updateAdPreview() {
                const ticker = document.getElementById('adPreviewTicker');
                if (!ticker) return;

                const activeAds = ads.filter(ad => ad.status === 'active').sort((a, b) => (a.display_order || 0) - (b.display_order || 0));

                if (activeAds.length === 0) {
                    ticker.innerHTML = '<span style="padding: 0 30px;">Aucune annonce active</span>';
                    return;
                }

                // Doubler les annonces pour l'effet de boucle infinie
                const adsHTML = activeAds.map(ad =>
                    `<span style="padding: 0 30px;">${ad.icon} ${ad.message}</span>`
                ).join('');

                ticker.innerHTML = adsHTML + adsHTML;
            }

            function navigateTo(view) {
                currentView = view;

                // Cacher toutes les vues
                document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));

                // Afficher la vue s√©lectionn√©e
                document.getElementById(view + '-view').classList.remove('hidden');

                // Mettre √† jour la navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-view') === view) {
                        link.classList.add('active');
                    }
                });
            }

            // ==========================================
            // STATS
            // ==========================================

            function updateStats() {
                document.getElementById('statsArticles').textContent = articles.filter(a => a.status === 'published').length;
                document.getElementById('statsAds').textContent = ads.filter(a => a.status === 'active').length;
                document.getElementById('statsAdmins').textContent = admins.length;
            }

            // ==========================================
            // ARTICLES
            // ==========================================

            function renderArticles() {
                const tbody = document.getElementById('articlesTableBody');

                if (articles.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #666;">Aucun article</td></tr>';
                    return;
                }

                tbody.innerHTML = articles.map(article => `
                <tr>
                    <td><strong>${article.title}</strong></td>
                    <td><span class="badge badge-info">${getCategoryLabel(article.category)}</span></td>
                    <td>${article.author || 'Inconnu'}</td>
                    <td>${formatDate(article.created_at)}</td>
                    <td>
                        <span class="badge ${article.status === 'published' ? 'badge-success' : 'badge-warning'}">
                            ${article.status === 'published' ? 'Publi√©' : 'Brouillon'}
                        </span>
                    </td>
                    <td>
                        <button onclick="editArticle(${article.id})" class="wp-button wp-button-secondary" style="padding: 5px 10px; margin-right: 5px;">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button onclick="deleteArticle(${article.id})" class="wp-button wp-button-danger" style="padding: 5px 10px;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
            }

            function showArticleModal(articleId = null) {
                const modal = document.getElementById('articleModal');
                const title = document.getElementById('articleModalTitle');

                // Reset form
                document.getElementById('articleId').value = '';
                document.getElementById('articleRemoteId').value = '';
                document.getElementById('articleTitle').value = '';
                document.getElementById('articleSlug').value = '';
                document.getElementById('articleExcerpt').value = '';
                document.getElementById('articleContent').value = '';
                document.getElementById('articleCategory').value = 'parentalite';
                document.getElementById('articleImageUrl').value = '';
                document.getElementById('articleImagePreview').classList.add('hidden');
                document.getElementById('articleAuthor').value = currentAdmin.name;
                document.getElementById('articleTags').value = '';
                document.getElementById('articleReadTime').value = '';
                document.getElementById('articleStatus').value = 'published';

                if (articleId) {
                    const article = articles.find(a => a.id === articleId);
                    if (article) {
                        title.textContent = 'Modifier l\'article';
                        document.getElementById('articleId').value = article.id;
                        document.getElementById('articleRemoteId').value = article.remote_id || '';
                        document.getElementById('articleTitle').value = article.title;
                        document.getElementById('articleSlug').value = article.slug || '';
                        document.getElementById('articleExcerpt').value = article.excerpt || '';
                        document.getElementById('articleContent').value = article.content;
                        document.getElementById('articleCategory').value = article.category;
                        document.getElementById('articleImageUrl').value = article.image_url || '';
                        if (article.image_url) {
                            document.getElementById('articleImagePreview').src = article.image_url;
                            document.getElementById('articleImagePreview').classList.remove('hidden');
                        }
                        document.getElementById('articleAuthor').value = article.author || '';
                        document.getElementById('articleTags').value = article.tags || '';
                        document.getElementById('articleReadTime').value = article.read_time || '';
                        document.getElementById('articleStatus').value = article.status || 'published';
                    }
                } else {
                    title.textContent = 'Nouvel article';
                }

                modal.classList.remove('hidden');
            }

            async function saveArticle() {
                const id = document.getElementById('articleId').value;
                const title = document.getElementById('articleTitle').value.trim();
                const content = document.getElementById('articleContent').value.trim();

                if (!title || !content) {
                    showNotification('Veuillez remplir les champs obligatoires', 'error');
                    return;
                }

                // Upload image si nouvelle
                const imageFile = document.getElementById('articleImage').files[0];
                let imageUrl = document.getElementById('articleImageUrl').value;

                if (imageFile) {
                    showNotification('Compression et upload de l\'image...', 'success');
                    imageUrl = await uploadImage(imageFile);
                    if (!imageUrl) {
                        showNotification('Erreur lors de l\'upload de l\'image', 'error');
                        return;
                    }
                }

                const slug = document.getElementById('articleSlug').value.trim() || slugify(title);

                const article = {
                    id: id ? parseInt(id) : Date.now(),
                    remote_id: document.getElementById('articleRemoteId').value || null,
                    title: title,
                    slug: slug,
                    excerpt: document.getElementById('articleExcerpt').value.trim() || content.substring(0, 150),
                    content: content,
                    category: document.getElementById('articleCategory').value,
                    image_url: imageUrl,
                    author: document.getElementById('articleAuthor').value.trim() || currentAdmin.name,
                    tags: document.getElementById('articleTags').value.trim(),
                    read_time: document.getElementById('articleReadTime').value.trim() || '5 min',
                    status: document.getElementById('articleStatus').value,
                    created_at: id ? articles.find(a => a.id === parseInt(id)).created_at : new Date().toISOString(),
                    updated_at: new Date().toISOString()
                };

                if (id) {
                    const index = articles.findIndex(a => a.id === parseInt(id));
                    articles[index] = article;
                } else {
                    articles.push(article);
                }

                // Marquer comme n√©cessitant une sync
                article.needs_sync = true;

                localStorage.setItem('ep_articles', JSON.stringify(articles));

                // Sync imm√©diate si activ√© (en plus de l'auto-sync)
                if (syncConfig.enabled) {
                    await syncToServer('article', article, id ? 'update' : 'create');
                    article.needs_sync = false;
                    localStorage.setItem('ep_articles', JSON.stringify(articles));
                }

                renderArticles();
                updateStats();
                closeModal('articleModal');
                showNotification('Article enregistr√© avec succ√®s !', 'success');
            }

            function editArticle(id) {
                showArticleModal(id);
            }

            async function deleteArticle(id) {
                if (!confirm('Voulez-vous vraiment supprimer cet article ?')) return;

                const article = articles.find(a => a.id === id);

                // Supprimer image si existe
                if (article.image_url && syncConfig.enabled) {
                    await deleteRemoteImage(article.image_url);
                }

                articles = articles.filter(a => a.id !== id);
                localStorage.setItem('ep_articles', JSON.stringify(articles));

                // Sync si activ√©
                if (syncConfig.enabled && article.remote_id) {
                    await syncToServer('article', { id: article.remote_id }, 'delete');
                }

                renderArticles();
                updateStats();
                showNotification('Article supprim√©', 'success');
            }

            // ==========================================
            // ADS
            // ==========================================

            function renderAds() {
                const tbody = document.getElementById('adsTableBody');

                // Mettre √† jour la pr√©visualisation
                updateAdPreview();

                if (ads.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #666;">Aucune annonce</td></tr>';
                    return;
                }

                tbody.innerHTML = ads.map(ad => `
                <tr>
                    <td style="font-size: 20px;">${ad.icon}</td>
                    <td>${ad.message}</td>
                    <td><span class="badge badge-info">${ad.position}</span></td>
                    <td>
                        <span class="badge ${ad.status === 'active' ? 'badge-success' : 'badge-warning'}">
                            ${ad.status === 'active' ? 'Actif' : 'Inactif'}
                        </span>
                    </td>
                    <td>${ad.display_order}</td>
                    <td>
                        <button onclick="editAd(${ad.id})" class="wp-button wp-button-secondary" style="padding: 5px 10px; margin-right: 5px;">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button onclick="deleteAd(${ad.id})" class="wp-button wp-button-danger" style="padding: 5px 10px;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
            }

            function showAdModal(adId = null) {
                const modal = document.getElementById('adModal');
                const title = document.getElementById('adModalTitle');

                // Reset form
                document.getElementById('adId').value = '';
                document.getElementById('adRemoteId').value = '';
                document.getElementById('adName').value = '';
                document.getElementById('adMessage').value = '';
                document.getElementById('adIcon').value = 'üì¢';
                document.getElementById('adPosition').value = 'header';
                document.getElementById('adTargetUrl').value = '';
                document.getElementById('adStatus').value = 'active';
                document.getElementById('adDisplayOrder').value = '0';

                if (adId) {
                    const ad = ads.find(a => a.id === adId);
                    if (ad) {
                        title.textContent = 'Modifier l\'annonce';
                        document.getElementById('adId').value = ad.id;
                        document.getElementById('adRemoteId').value = ad.remote_id || '';
                        document.getElementById('adName').value = ad.name;
                        document.getElementById('adMessage').value = ad.message;
                        document.getElementById('adIcon').value = ad.icon || 'üì¢';
                        document.getElementById('adPosition').value = ad.position;
                        document.getElementById('adTargetUrl').value = ad.target_url || '';
                        document.getElementById('adStatus').value = ad.status;
                        document.getElementById('adDisplayOrder').value = ad.display_order || 0;
                    }
                } else {
                    title.textContent = 'Nouvelle annonce';
                }

                modal.classList.remove('hidden');
            }

            async function saveAd() {
                const id = document.getElementById('adId').value;
                const name = document.getElementById('adName').value.trim();
                const message = document.getElementById('adMessage').value.trim();

                if (!name || !message) {
                    showNotification('Veuillez remplir les champs obligatoires', 'error');
                    return;
                }

                const ad = {
                    id: id ? parseInt(id) : Date.now(),
                    remote_id: document.getElementById('adRemoteId').value || null,
                    name: name,
                    message: message,
                    icon: document.getElementById('adIcon').value.trim() || 'üì¢',
                    position: document.getElementById('adPosition').value,
                    target_url: document.getElementById('adTargetUrl').value.trim(),
                    status: document.getElementById('adStatus').value,
                    display_order: parseInt(document.getElementById('adDisplayOrder').value) || 0,
                    created_at: id ? ads.find(a => a.id === parseInt(id)).created_at : new Date().toISOString(),
                    updated_at: new Date().toISOString()
                };

                if (id) {
                    const index = ads.findIndex(a => a.id === parseInt(id));
                    ads[index] = ad;
                } else {
                    ads.push(ad);
                }

                // Marquer comme n√©cessitant une sync
                ad.needs_sync = true;

                localStorage.setItem('ep_ads', JSON.stringify(ads));

                // Sync imm√©diate si activ√© (en plus de l'auto-sync)
                if (syncConfig.enabled) {
                    await syncToServer('ad', ad, id ? 'update' : 'create');
                    ad.needs_sync = false;
                    localStorage.setItem('ep_ads', JSON.stringify(ads));
                }

                renderAds();
                updateStats();
                closeModal('adModal');
                showNotification('Annonce enregistr√©e avec succ√®s !', 'success');
            }

            function editAd(id) {
                showAdModal(id);
            }

            async function deleteAd(id) {
                if (!confirm('Voulez-vous vraiment supprimer cette annonce ?')) return;

                const ad = ads.find(a => a.id === id);
                ads = ads.filter(a => a.id !== id);
                localStorage.setItem('ep_ads', JSON.stringify(ads));

                // Sync si activ√©
                if (syncConfig.enabled && ad.remote_id) {
                    await syncToServer('ad', { id: ad.remote_id }, 'delete');
                }

                renderAds();
                updateStats();
                showNotification('Annonce supprim√©e', 'success');
            }

            // ==========================================
            // ADMINS
            // ==========================================

            function renderAdmins() {
                const tbody = document.getElementById('adminsTableBody');

                // ‚úÖ CORRECTION: S'assurer que les admins sont bien charg√©s
                if (!admins || admins.length === 0) {
                    console.warn('‚ö†Ô∏è Aucun administrateur trouv√©');
                    tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; color: #666;">Aucun administrateur</td></tr>';
                    return;
                }

                console.log('üìã Rendu des administrateurs:', admins);

                tbody.innerHTML = admins.map(admin => `
                <tr>
                    <td><strong>${admin.name}</strong></td>
                    <td>${admin.email}</td>
                    <td>
                        <span class="badge ${admin.role === 'super_admin' ? 'badge-danger' : 'badge-info'}">
                            ${admin.role === 'super_admin' ? 'Super Admin' : 'Admin'}
                        </span>
                    </td>
                    <td>${formatDate(admin.created_at)}</td>
                    <td>
                        ${currentAdmin.role === 'super_admin' ? `
                            <button onclick="editAdmin(${admin.id})" class="wp-button wp-button-secondary" style="padding: 5px 10px; margin-right: 5px;">
                                <i class="fas fa-edit"></i>
                            </button>
                            ${admin.email !== currentAdmin.email ? `
                                <button onclick="deleteAdmin(${admin.id})" class="wp-button wp-button-danger" style="padding: 5px 10px;">
                                    <i class="fas fa-trash"></i>
                                </button>
                            ` : '<span style="color: #666;">Compte actuel</span>'}
                        ` : '<span style="color: #666;">Acc√®s restreint</span>'}
                    </td>
                </tr>
            `).join('');
            }

            function showAdminModal(adminId = null) {
                if (currentAdmin.role !== 'super_admin') {
                    showNotification('Seuls les super administrateurs peuvent g√©rer les comptes', 'error');
                    return;
                }

                const modal = document.getElementById('adminModal');
                const title = document.getElementById('adminModalTitle');

                // Reset form
                document.getElementById('adminId').value = '';
                document.getElementById('adminPreviousEmail').value = '';
                document.getElementById('adminName').value = '';
                document.getElementById('adminEmail').value = '';
                document.getElementById('adminPassword').value = '';
                document.getElementById('adminRole').value = 'admin';

                if (adminId) {
                    const admin = admins.find(a => a.id === adminId);
                    if (admin) {
                        title.textContent = 'Modifier l\'administrateur';
                        document.getElementById('adminId').value = admin.id;
                        document.getElementById('adminPreviousEmail').value = admin.email;
                        document.getElementById('adminName').value = admin.name;
                        document.getElementById('adminEmail').value = admin.email;
                        document.getElementById('adminRole').value = admin.role;
                    }
                } else {
                    title.textContent = 'Nouvel administrateur';
                }

                modal.classList.remove('hidden');
            }

            async function saveAdmin() {
                const id = document.getElementById('adminId').value;
                const name = document.getElementById('adminName').value.trim();
                const email = document.getElementById('adminEmail').value.trim();
                const password = document.getElementById('adminPassword').value.trim();

                if (!name || !email) {
                    showNotification('Veuillez remplir les champs obligatoires', 'error');
                    return;
                }

                if (!id && !password) {
                    showNotification('Le mot de passe est requis pour un nouvel administrateur', 'error');
                    return;
                }

                const admin = {
                    id: id ? parseInt(id) : Date.now(),
                    name: name,
                    email: email,
                    role: document.getElementById('adminRole').value,
                    created_at: id ? admins.find(a => a.id === parseInt(id)).created_at : new Date().toISOString(),
                    updated_at: new Date().toISOString()
                };

                if (password) {
                    admin.password_hash = btoa(password); // Simple encoding (remplacer par bcrypt en production)
                }

                if (id) {
                    const index = admins.findIndex(a => a.id === parseInt(id));
                    if (!password) {
                        admin.password_hash = admins[index].password_hash;
                    }
                    admins[index] = admin;
                } else {
                    admins.push(admin);
                }

                // Marquer comme n√©cessitant une sync
                admin.needs_sync = true;

                localStorage.setItem('ep_admins', JSON.stringify(admins));

                // Sync si activ√©
                if (syncConfig.enabled) {
                    const syncData = {
                        nom: admin.name,
                        name: admin.name,
                        email: admin.email,
                        role: admin.role,
                        previous_email: document.getElementById('adminPreviousEmail').value
                    };
                    if (password) {
                        syncData.password = password;
                    }

                    const success = await syncToServer('admin', syncData, id ? 'update' : 'create');

                    if (success) {
                        admin.needs_sync = false;
                        localStorage.setItem('ep_admins', JSON.stringify(admins));

                        // Envoyer email de notification si coch√© et cr√©ation
                        if (!id && document.getElementById('adminSendEmail').checked) {
                            await sendAdminNotificationEmail(admin.name, admin.email, password);
                        }
                    }
                }

                renderAdmins();
                updateStats();
                closeModal('adminModal');
                showNotification('Administrateur enregistr√© avec succ√®s !', 'success');
            }

            function editAdmin(id) {
                showAdminModal(id);
            }

            async function deleteAdmin(id) {
                if (currentAdmin.role !== 'super_admin') {
                    showNotification('Acc√®s refus√©', 'error');
                    return;
                }

                const admin = admins.find(a => a.id === id);

                if (admin.email === currentAdmin.email) {
                    showNotification('Vous ne pouvez pas supprimer votre propre compte', 'error');
                    return;
                }

                if (!confirm('Voulez-vous vraiment supprimer cet administrateur ?')) return;

                admins = admins.filter(a => a.id !== id);
                localStorage.setItem('ep_admins', JSON.stringify(admins));

                // Sync si activ√©
                if (syncConfig.enabled) {
                    await syncToServer('admin', { email: admin.email }, 'delete');
                }

                renderAdmins();
                updateStats();
                showNotification('Administrateur supprim√©', 'success');
            }

            // ==========================================
            // SETTINGS
            // ==========================================

            function loadSettings() {
                document.getElementById('syncEndpoint').value = syncConfig.endpoint || '';
                document.getElementById('uploadUrl').value = syncConfig.uploadUrl || '';
                document.getElementById('refreshUrl').value = syncConfig.refreshUrl || '';
                document.getElementById('apiKey').value = syncConfig.apiKey || '';
                document.getElementById('syncEnabled').checked = syncConfig.enabled || false;
            }

            function saveSettings() {
                syncConfig = {
                    enabled: document.getElementById('syncEnabled').checked,
                    endpoint: document.getElementById('syncEndpoint').value.trim(),
                    uploadUrl: document.getElementById('uploadUrl').value.trim(),
                    refreshUrl: document.getElementById('refreshUrl').value.trim(),
                    apiKey: document.getElementById('apiKey').value.trim()
                };

                localStorage.setItem('syncConfig', JSON.stringify(syncConfig));
                updateSyncStatus();

                // Red√©marrer l'auto-sync avec la nouvelle config
                stopAutoSync();
                if (syncConfig.enabled) {
                    startAutoSync();
                    showNotification('Configuration enregistr√©e ! Auto-sync activ√©.', 'success');
                } else {
                    showNotification('Configuration enregistr√©e ! Auto-sync d√©sactiv√©.', 'success');
                }
            }

            function exportData() {
                const data = {
                    articles: articles,
                    ads: ads,
                    admins: admins.map(a => ({ ...a, password_hash: undefined })), // Exclure les mots de passe
                    exported_at: new Date().toISOString()
                };

                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `educations-plurielles-${Date.now()}.json`;
                a.click();
                URL.revokeObjectURL(url);

                showNotification('Donn√©es export√©es !', 'success');
            }

            function clearAllData() {
                if (!confirm('ATTENTION : Cela effacera TOUTES vos donn√©es locales. √ätes-vous s√ªr ?')) return;

                localStorage.removeItem('ep_articles');
                localStorage.removeItem('ep_ads');
                localStorage.removeItem('ep_admins');

                articles = [];
                ads = [];
                admins = [];

                renderArticles();
                renderAds();
                renderAdmins();
                updateStats();

                showNotification('Toutes les donn√©es ont √©t√© effac√©es', 'success');
            }

            // ==========================================
            // UPLOAD & SYNC
            // ==========================================

            async function uploadImage(file) {
                if (!syncConfig.enabled || !syncConfig.uploadUrl) {
                    showNotification('Upload d√©sactiv√© (mode hors ligne)', 'error');
                    return null;
                }

                // Compression client
                const compressed = await compressImage(file);

                const formData = new FormData();
                formData.append('file', compressed);

                try {
                    const response = await fetch(syncConfig.uploadUrl, {
                        method: 'POST',
                        headers: {
                            'X-Admin-Sync-Key': syncConfig.apiKey
                        },
                        body: formData
                    });

                    const result = await response.json();

                    if (result.success) {
                        return result.url;
                    } else {
                        console.error('Upload error:', result.error);
                        return null;
                    }
                } catch (error) {
                    console.error('Upload error:', error);
                    return null;
                }
            }

            async function compressImage(file) {
                return new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = new Image();
                        img.onload = () => {
                            const canvas = document.createElement('canvas');
                            let width = img.width;
                            let height = img.height;
                            const maxDim = 1600;

                            if (width > maxDim || height > maxDim) {
                                if (width > height) {
                                    height = (height / width) * maxDim;
                                    width = maxDim;
                                } else {
                                    width = (width / height) * maxDim;
                                    height = maxDim;
                                }
                            }

                            canvas.width = width;
                            canvas.height = height;
                            const ctx = canvas.getContext('2d');
                            ctx.drawImage(img, 0, 0, width, height);

                            canvas.toBlob((blob) => {
                                resolve(new File([blob], file.name, { type: 'image/jpeg' }));
                            }, 'image/jpeg', 0.85);
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                });
            }

            async function deleteRemoteImage(url) {
                if (!syncConfig.enabled || !syncConfig.uploadUrl) return;

                try {
                    await fetch(syncConfig.uploadUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Admin-Sync-Key': syncConfig.apiKey
                        },
                        body: JSON.stringify({
                            action: 'delete',
                            url: url
                        })
                    });
                } catch (error) {
                    console.error('Delete image error:', error);
                }
            }

            async function sendAdminNotificationEmail(name, email, password) {
                if (!syncConfig.enabled || !syncConfig.endpoint) return;

                try {
                    const emailEndpoint = syncConfig.endpoint.replace('sync.php', 'send-email.php');

                    const response = await fetch(emailEndpoint, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Admin-Sync-Key': syncConfig.apiKey
                        },
                        body: JSON.stringify({
                            action: 'welcome',
                            to: email,
                            name: name,
                            password: password,
                            admin_url: syncConfig.endpoint.replace('/admin/api/sync.php', '/admin.html')
                        })
                    });

                    const result = await response.json();

                    if (result.success) {
                        showNotification('Email de notification envoy√© √† ' + email, 'success');
                    } else {
                        console.error('Email error:', result.error);
                    }
                } catch (error) {
                    console.error('Send email error:', error);
                }
            }

            async function syncToServer(type, data, operation) {
                if (!syncConfig.enabled || !syncConfig.endpoint) return;

                try {
                    const response = await fetch(syncConfig.endpoint, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Admin-Sync-Key': syncConfig.apiKey
                        },
                        body: JSON.stringify({
                            type: type,
                            operation: operation,
                            data: data
                        })
                    });

                    const result = await response.json();

                    if (result.success && operation === 'create' && result.id) {
                        // Mettre √† jour remote_id
                        if (type === 'article') {
                            const article = articles.find(a => a.id === data.id);
                            if (article) {
                                article.remote_id = result.id;
                                localStorage.setItem('ep_articles', JSON.stringify(articles));
                            }
                        } else if (type === 'ad') {
                            const ad = ads.find(a => a.id === data.id);
                            if (ad) {
                                ad.remote_id = result.id;
                                localStorage.setItem('ep_ads', JSON.stringify(ads));
                            }
                        }
                    }

                    // Refresh site public si configur√©
                    if (syncConfig.refreshUrl && operation !== 'delete') {
                        fetch(syncConfig.refreshUrl).catch(() => { });
                    }

                    return result.success;
                } catch (error) {
                    console.error('Sync error:', error);
                    return false;
                }
            }

            // ==========================================
            // HELPERS
            // ==========================================

            function closeModal(modalId) {
                document.getElementById(modalId).classList.add('hidden');
            }

            function showNotification(message, type = 'success') {
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.textContent = message;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }

            // ‚úÖ DIAGNOSTIC: Fonction pour v√©rifier l'√©tat du localStorage
            function checkLocalStorage() {
                console.log('üîç DIAGNOSTIC LOCALSTORAGE:');
                console.table({
                    'Articles': JSON.parse(localStorage.getItem('ep_articles') || '[]').length,
                    'Publicit√©s': JSON.parse(localStorage.getItem('ep_ads') || '[]').length,
                    'Administrateurs': JSON.parse(localStorage.getItem('ep_admins') || '[]').length,
                    'Config sync': JSON.parse(localStorage.getItem('syncConfig') || '{}').enabled ? '‚úÖ Activ√©e' : '‚ùå D√©sactiv√©e'
                });

                console.log('üìã Tous les admins en localStorage:');
                console.table(JSON.parse(localStorage.getItem('ep_admins') || '[]'));

                console.log('üìã Admins en m√©moire (variable admins):');
                console.table(admins);
            }

            // Rendre la fonction accessible dans la console
            window.checkLocalStorage = checkLocalStorage;

            function previewImage(input, previewId) {
                const preview = document.getElementById(previewId);
                if (input.files && input.files[0]) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        preview.src = e.target.result;
                        preview.classList.remove('hidden');
                    };
                    reader.readAsDataURL(input.files[0]);
                }
            }

            function slugify(text) {
                return text
                    .toLowerCase()
                    .normalize('NFD')
                    .replace(/[\u0300-\u036f]/g, '')
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/^-+|-+$/g, '');
            }

            function formatDate(dateString) {
                if (!dateString) return 'N/A';
                const date = new Date(dateString);
                return date.toLocaleDateString('fr-FR', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
            }

            function getCategoryLabel(category) {
                const labels = {
                    'parentalite': 'Parentalit√©',
                    'education': '√âducation',
                    'droits': 'Droits',
                    'protection': 'Protection',
                    'sante': 'Sant√©',
                    'developpement': 'D√©veloppement',
                    'temoignages': 'T√©moignages'
                };
                return labels[category] || category;
            }

            // ==========================================
            // FONCTION PAGE D'ACCUEIL
            // ==========================================

            function showAdminPanel() {
                document.getElementById('welcomePage').classList.remove('active');
                document.getElementById('adminPanel').style.display = 'flex';
            }

            function goBackToWelcome() {
                document.getElementById('welcomePage').classList.add('active');
                document.getElementById('adminPanel').style.display = 'none';
            }

            function goToSection(sectionId) {
                const sections = ['dashboard', 'articles', 'publicites', 'administrateurs', 'parametres'];
                sections.forEach(id => {
                    const elem = document.getElementById(id);
                    if (elem) elem.style.display = id === sectionId ? 'block' : 'none';
                });

                // Mettre √† jour liens actifs
                document.querySelectorAll('.wp-sidebar a').forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.section === sectionId) {
                        link.classList.add('active');
                    }
                });
            }

            function updateWelcomeStatus() {
                // Admins
                const adminCount = (admins || []).length;
                document.getElementById('adminStatusText').innerHTML =
                    `Administrateurs: <strong>${adminCount}</strong>`;
                const adminIcon = adminCount > 0 ? 'status-ok' : 'status-warning';
                document.getElementById('adminStatusIcon').className = 'status-indicator ' + adminIcon;

                // Sync
                const syncEnabled = syncConfig?.enabled || false;
                document.getElementById('syncStatusText').innerHTML =
                    `Synchronisation: <strong>${syncEnabled ? '‚úì Activ√©e' : '‚úó D√©sactiv√©e'}</strong>`;
                const syncIcon = syncEnabled ? 'status-ok' : 'status-warning';
                document.getElementById('syncStatusIcon').className = 'status-indicator ' + syncIcon;

                // Storage
                let totalSize = 0;
                try {
                    totalSize = JSON.stringify(localStorage).length;
                } catch (e) { }
                document.getElementById('storageSize').textContent =
                    (totalSize / 1024).toFixed(1) + ' KB';

                // Last update
                const now = new Date().toLocaleString('fr-FR');
                document.getElementById('lastUpdate').textContent = now;
            }

            function checkSystemHealth() {
                console.clear();
                console.log('%cüîç DIAGNOSTIC SYST√àME', 'font-size: 16px; font-weight: bold; color: #667eea;');
                console.log('‚ïê'.repeat(50));

                // App state
                console.log('\nüì± √âtat de l\'application:');
                console.table({
                    'Admins en m√©moire': admins?.length || 0,
                    'Articles': articles?.length || 0,
                    'Publicit√©s': ads?.length || 0,
                    'Sync activ√©e': syncConfig?.enabled || false,
                    'Endpoint configur√©': syncConfig?.endpoint ? '‚úì' : '‚úó'
                });

                // localStorage
                console.log('\nüíæ LocalStorage:');
                console.table({
                    'ep_admins': JSON.parse(localStorage.getItem('ep_admins') || '[]').length,
                    'ep_articles': JSON.parse(localStorage.getItem('ep_articles') || '[]').length,
                    'ep_ads': JSON.parse(localStorage.getItem('ep_ads') || '[]').length,
                    'syncConfig': localStorage.getItem('syncConfig') ? '‚úì' : '‚úó'
                });

                console.log('\n‚úÖ Diagnostic compl√©t√©. Les r√©sultats sont affich√©s ci-dessus.');
                showNotification('üìä Diagnostic compl√©t√©. Consultez la console (F12)', 'info');
            }

            function launchRecoveryScript() {
                if (typeof window.recoverLocalStorage === 'function') {
                    console.log('üÜò Lancement du script de r√©cup√©ration...');
                    window.recoverLocalStorage();
                    updateWelcomeStatus();
                    showNotification('‚úÖ R√©cup√©ration compl√©t√©e', 'success');
                } else if (typeof checkLocalStorage === 'function') {
                    console.log('üîç Diagnostic...');
                    checkLocalStorage();
                    showNotification('‚úÖ Diagnostic effectu√©', 'info');
                } else {
                    showNotification('‚ö†Ô∏è Script non disponible. V√©rifiez recovery-script.js', 'warning');
                }
            }

            function openDocumentation() {
                const docs = [
                    { name: 'README-FIX.txt', time: '2 min', type: '‚ö°' },
                    { name: 'SOLUTION-RAPIDE.md', time: '5 min', type: 'üöÄ' },
                    { name: 'DIAGNOSTIC-ADMIN.md', time: '10 min', type: 'üîç' },
                    { name: 'GUIDE-COMPLET-v1.1.md', time: '20 min', type: 'üìã' }
                ];

                let msg = 'üìö Documentation disponible:\\n\\n';
                docs.forEach(doc => {
                    msg += `${doc.type} ${doc.name} (${doc.time})\\n`;
                });
                msg += '\\nüëâ Consultez ces fichiers dans le dossier du projet.';
                alert(msg);
            }

            // Initialiser la page d'accueil
            document.addEventListener('DOMContentLoaded', function () {
                setTimeout(() => {
                    updateWelcomeStatus();
                    console.log('‚úÖ Page d\'accueil initialis√©e avec succ√®s');
                }, 500);
            });
        </script>
    </div> <!-- Fermeture wp-content -->
    </div> <!-- Fermeture adminPanel -->
</body>

</html>